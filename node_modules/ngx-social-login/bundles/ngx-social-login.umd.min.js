!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-social-login",["exports","@angular/core","rxjs","rxjs/operators"],t):t(e["ngx-social-login"]={},e.ng.core,e.rxjs,e.rxjs.operators)}(this,function(e,o,r,i){"use strict";var n=new o.InjectionToken("providers configuration"),c=function(e,t){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function a(e,t){function o(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var s=function(){return e=Object.assign||function e(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},e.apply(this,arguments)},t=function u(e,t,o,n){void 0===n&&(n=!0),this.ID_PREFIX="social-login__";var r=this.ID_PREFIX+e;if(!document.getElementById(r)){var i=document.createElement("script");i.id=r,i.async=n,i.src=t,i.onload=o,i.defer=!0,document.head.appendChild(i)}},p={FACEBOOK:"facebook",GOOGLE:"google"},l=function(t){function e(e){var o=t.call(this,p.FACEBOOK,"//connect.facebook.net/en_US/sdk.js",function(){var e=o._config.initOptions,t=e.version?e:s({},e,{version:"v2.9"});FB.init(t)})||this;return o._config=e,o}return a(e,t),e.prototype.login=function(){var e=this;return r.Observable.create(function(o){FB.login(function(e){if(e.authResponse){var t=e.authResponse;FB.api("/me?fields=name,email,picture,first_name,last_name",function(e){o.complete({id:e.id,name:e.name,email:e.email,profileImg:"https://graph.facebook.com/"+e.id+"/picture?type=normal",firstName:e.first_name,lastName:e.last_name,accessToken:t.accessToken})})}},e._config.loginOptions)})},e.prototype.logout=function(){return r.Observable.create(function(e){return e.complete(FB.logout())})},e}(t),f=function(e){function t(t){var o=e.call(this,p.GOOGLE,"//apis.google.com/js/platform.js",function(){gapi.load("auth2",function(){var e=t.scope?t:s({},t,{scope:"email"});gapi.auth2.init(e).then(function(e){return o._googleAuth=e})["catch"](function(e){throw new Error("Something went wrong during initialization: "+e.details)})})})||this;return o}return a(t,e),t.prototype.login=function(){var n=this;return r.from(this._googleAuth.signIn({prompt:"select_account"})).pipe(i.map(function(){var e=n._googleAuth.currentUser.get().getBasicProfile(),t=n._googleAuth.currentUser.get().getAuthResponse(!0).access_token,o=n._googleAuth.currentUser.get().getAuthResponse(!0).id_token;return{id:e.getId(),email:e.getEmail(),name:e.getName(),profileImg:e.getImageUrl(),accessToken:t,idToken:o}}))},t.prototype.logout=function(){var t=this;return r.Observable.create(function(e){return e.complete(t._googleAuth.signOut())})},t}(t),g=function(){function e(n){var r=this;this._providers={},this._providers=Object.keys(n).reduce(function(e,t){var o=p[t.toUpperCase()];return e[o]=r.oauthProviderFactory(o,n[t]),e},{})}return e.prototype.login=function(e){this._providerInUse=e;var t=this._providers[e];return t?t.login():r.EMPTY},e.prototype.logout=function(){var e=this._providers[this._providerInUse];return e?e.logout():r.EMPTY},e.prototype.oauthProviderFactory=function(e,t){switch(e){case p.FACEBOOK:return new l(t);case p.GOOGLE:return new f(t)}},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:o.Inject,args:[n]}]}]},e}(),d=function(){function t(){}return t.init=function(e){return{ngModule:t,providers:[{provide:n,useValue:e}]}},t.decorators=[{type:o.NgModule,args:[{providers:[g]}]}],t}();e.SocialLoginService=g,e.NgxSocialLoginModule=d,e.Provider=p,e.Éµa=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-social-login.umd.min.js.map